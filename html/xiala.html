<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="../js/jquery-2.2.4.min.js"></script>
</head>
<style>
    #div_main {
        margin: 0 auto;
        width: 300px;
        height: 400px;
        border: 1px solid black;
        margin-top: 50px;
    }

    #div_txt {
        position: relative;
        width: 200px;
        margin: 0 auto;
        margin-top: 40px;
    }

    #txt1 {
        width: 99%;
    }

    #div_items {
        position: relative;
        width: 100%;
        height: 200px;
        border: 1px solid #66afe9;
        border-top: 0px;
        overflow: auto;
        display: none;
    }

    .div_item {
        width: 100%;
        height: 20px;
        margin-top: 1px;
        font-size: 13px;
        line-height: 20px;
    }
</style>

<body>
    <!-- <div class="g_xiala" id="g_xialakuang">
        <input type="text" id="g_input"  placeholder="全部"/>
        <ul id="g_name"
            style="list-style:none;width:100%;height:100px;position:absolute;z-index:999;background:#fff;overflow-y:scroll">
        </ul>
    </div> -->
    <div id="div_main">
        <!--表单的autocomplete="off"属性设置可以阻止浏览器默认的提示框-->
        <form autocomplete="off">
            <div id="div_txt">
                <!--要模糊匹配的文本框-->
                <input type="text" id="txt1" />

                <!--模糊匹配窗口-->
                <div id="div_items">
                    <div class="div_item">周杰伦</div>
                    <div class="div_item">周杰</div>
                    <div class="div_item">林俊杰</div>
                    <div class="div_item">林宥嘉</div>
                    <div class="div_item">林妙可</div>
                    <div class="div_item">唐嫣</div>
                    <div class="div_item">唐家三少</div>
                    <div class="div_item">唐朝盛世</div>
                    <div class="div_item">奥迪A4L</div>
                    <div class="div_item">奥迪A6L</div>
                    <div class="div_item">奥迪A8L</div>
                    <div class="div_item">奥迪R8</div>
                    <div class="div_item">宝马GT</div>
                </div>
            </div>
        </form>
    </div>
    <script>
        $(function () {
            $.ajax({
                url: '../json/xiala.json',
                type: 'get',
                dataType: 'json',
                async: false,
                success: function (res) {
                    console.log(res)
                    var select = $('#div_items');
                    var data = res
                    console.log(data)
                    // select.empty()
                    for (i in data) {
                        // console.log(data)
                        select.append(`<div class="div_item">${data[i].name}</div>`)
                    }

                },
                error: function (err) {
                    console.log(err)
                }
            })
            //弹出列表框
            $("#txt1").click(function () {
                console.log(666)

                $("#div_items").css('display', 'block');
                return false;
            });

            //隐藏列表框
            $("body").click(function () {
                $("#div_items").css('display', 'none');
            });

            //移入移出效果
            $(".div_item").hover(function () {
                console.log(655)
                $(this).css('background-color', '#1C86EE').css('color', 'white');
            }, function () {
                $(this).css('background-color', 'white').css('color', 'black');
            });
            var search_input = $("#txt1"),
                search_content = $("#div_items");
            //文本框输入
            $("#txt1").keyup(function () {
                $("#div_items").css('display', 'block'); //只要输入就显示列表框

                if ($("#txt1").val().length <= 0) {
                    $(".div_item").css('display', 'block'); //如果什么都没填，跳出，保持全部显示状态
                    return;
                }

                //根据首个字搜索
                // $(".div_item").css('display', 'none'); //如果填了，先将所有的选项隐藏
                // for (var i = 0; i < $(".div_item").length; i++) {
                //     //模糊匹配，将所有匹配项显示
                //     if ($(".div_item").eq(i).text().substr(0, $("#txt1").val().length) == $("#txt1")
                //         .val()) {
                //         $(".div_item").eq(i).css('display', 'block');
                //     }
                // }

                //根据关键字搜索
                $(".div_item:contains(" + search_input.val().trim() + ")").show();
                $(".div_item:not(:contains(" + search_input.val().trim() + "))").hide();
            });

            //项点击
            $(".div_item").on('click', function () {
                console.log(2333)
                $("#txt1").val($(this).text());
            });

        })
    </script>
</body>

</html>